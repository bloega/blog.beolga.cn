!function(J){function a(t,e,a){var n=(o=new Date).getDate(),C=o.getMonth(),T=o.getFullYear(),b=n,L=C,F=T,O=a,l=null,r=null,j={posts:[],prev:null,next:null},o="en",A=((n=t)&&"undefined"!=typeof calLanguages&&calLanguages[n]&&(o=n),J.extend({},J.fn.aCalendar.defaults,"undefined"==typeof calLanguages?{}:calLanguages[o],e));function S(){L<11?L++:(L=0,F++),p()}function W(){0<L?L--:(L=11,F--),p()}function $(t){t&&(F=t.getFullYear(),L=t.getMonth(),p())}function E(){A.single?null!=A.url&&""!=A.url&&(null===l&&J.ajax({url:A.url,async:!1,success:function(t){l=t,s(Object.keys(l))}}),null!==l)&&u()&&(j.posts=l[F+"-"+(L+1)]):(null===r&&J.ajax({url:A.root+"list.json",async:!1,success:function(t){s(t)}}),u()&&J.ajax({url:A.root+F+"-"+(L+1)+".json",async:!1,success:function(t){j.posts=t}}))}function s(t){r=t.map(function(t){t=t.split("-");return new Date(Date.UTC(+t[0],+t[1]-1))})}function u(){var t=Date.UTC(F,L);if(null!==r&&0!==r.length&&(0!==j.posts.length||!(null===j.prev&&null!==j.next&&j.next.getTime()>t||null===j.next&&null!==j.prev&&j.prev.getTime()<t))){j.posts=[];for(var e=0;e<r.length;e++){var a=r[e].getTime();if(t===a)return j.prev=0===e?null:r[e-1],j.next=e===r.length-1?null:r[e+1],1;if(t<a){j.prev=0===e?null:r[e-1],j.next=r[e];break}j.prev=r[e],j.next=null}}}function R(t,e){var a,n={"LMM+":A.months[t.getMonth()],"MM+":t.getMonth()+1};for(a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,"LMM+"===a?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}function p(){E();for(var t=new Date(F,L,1).getDay()-A.weekOffset,e=(t<=0&&(t=6- -1*(t+1)),new Date(F,L+1,0).getDate()),a=new Date(F,L,0).getDate()-t+1,n=J("<div/>").addClass("cal-head"),l=J("<div/>"),r=J("<div/>"),o=J("<div/>").addClass("cal-title"),r=(r.html(A.headArrows.previous),l.html(A.headArrows.next),curDate=new Date(Date.UTC(F,L)),0===j.posts.length?o.html(R(curDate,A.titleFormat)):(cTitleLink=J("<a/>").attr("href",R(curDate,A.titleLinkFormat)).attr("title",R(curDate,A.postsMonthTip)).html(R(curDate,A.titleFormat)),o.html(cTitleLink)),r.on("click",W),l.on("click",S),n.append(r),n.append(o),n.append(l),J("<table/>").addClass("cal")),s=A.weekOffset,o=J("<thead/>"),u=J("<tr/>"),p=0;p<7;p++){6<s&&(s=0);var d=J("<th/>").attr("scope","col").attr("title",A.dayOfWeek[s]);d.html(A.dayOfWeekShort[s]),u.append(d),s++}o.append(u),r.append(o);for(var l=J("<tfoot/>"),i=J("<tr/>"),c=J("<td/>").attr("colspan",3),f=J("<td/>").html(" "),h=J("<td/>").attr("colspan",3),y=(j.prev&&c.html(A.footArrows.previous+A.months[j.prev.getMonth()]).addClass("cal-foot").attr("title",R(j.prev,A.postsMonthTip)),j.next&&h.html(A.months[j.next.getMonth()]+A.footArrows.next).addClass("cal-foot").attr("title",R(j.next,A.postsMonthTip)),c.on("click",function(){$(j.prev)}),h.on("click",function(){$(j.next)}),i.append(c),i.append(f),i.append(h),l.append(i),J("<tbody/>")),g=1,m=1,p=0;p<6;p++){for(var v=J("<tr/>"),M=0;M<7;M++){var x=J("<td/>");if(7*p+M<t)x.addClass("cal-gray"),x.html(a++);else if(g<=e){g==b&&C==L&&T==F&&x.addClass("cal-today");for(var D,k={num:0,keys:[]},w=0;w<j.posts.length;w++)new Date(Date.parse(j.posts[w].date)).getDate()==g&&(k.keys[k.num++]=w);0!==k.num?(D=k.keys[0],D=J("<a>").attr("href",j.posts[D].link).attr("title",j.posts[D].title).html(g++),x.append(D)):x.html(g++)}else x.addClass("cal-gray"),x.html(m++);v.append(x)}y.append(v)}r.append(o),r.append(l),r.append(y),J(O).html(n),J(O).append(r)}return"/"!==A.root[0]&&(A.root="/"+A.root),"/"!==A.root[A.root.length-1]&&(A.root+="/"),p()}J.fn.aCalendar=function(t,e){return this.each(function(){return a(t,e,J(this))})},J.fn.aCalendar.defaults={months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["S","M","T","W","T","F","S"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],postsMonthTip:"Posts published in LMM yyyy",titleFormat:"yyyy LMM",titleLinkFormat:"/archives/yyyy/MM/",headArrows:{previous:'<span class="cal-prev"></span>',next:'<span class="cal-next"></span>'},footArrows:{previous:"« ",next:" »"},weekOffset:0,single:!0,root:"/calendar/",url:"/calendar.json"}}(jQuery),$(document).ready(function(){$("#calendar").aCalendar("zh-CN")});